<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop Debug 3.0</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; text-align: center; background-color: #f5f5f5; }
        button { 
            padding: 20px; font-size: 18px; width: 100%; 
            background: #28a745; color: white; 
            border: none; border-radius: 10px; margin-top: 20px;
        }
        #log { margin-top: 20px; color: red; font-size: 14px; }
    </style>
</head>
<body>
    <h1>–ü–†–û–í–ï–†–ö–ê –°–í–Ø–ó–ò</h1>
    <p>–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É. –ï—Å–ª–∏ –≤—ã–ª–µ–∑–µ—Ç –æ—à–∏–±–∫–∞ ‚Äî –º—ã –µ—ë —É–≤–∏–¥–∏–º.</p>
    <button onclick="buy()">üöÄ –û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–ö–ê–ó</button>
    <div id="log"></div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function buy() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –í–∏–¥–∏—Ç –ª–∏ –Ω–∞—Å –¢–µ–ª–µ–≥—Ä–∞–º?
            if (!tg.initDataUnsafe || !tg.initDataUnsafe.user) {
                alert("‚õî –û–®–ò–ë–ö–ê: –°–∞–π—Ç –æ—Ç–∫—Ä—ã—Ç –ù–ï –≤ Telegram (–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–¥–≥—Ä—É–∑–∏–ª–∏—Å—å).");
                return;
            }

            const data = JSON.stringify({
                title: "–¢–æ–≤–∞—Ä 3.0",
                price: 1000,
                desc: "–§–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç"
            });

            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
                tg.sendData(data);
                alert("‚úÖ –£–°–ü–ï–•: –ö–æ–º–∞–Ω–¥–∞ sendData —É—à–ª–∞! –¢–µ–ø–µ—Ä—å –∑–∞–∫—Ä–æ–π –æ–∫–Ω–æ –∫—Ä–µ—Å—Ç–∏–∫–æ–º –∏ —Å–º–æ—Ç—Ä–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª.");
            } catch (e) {
                // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø–æ–∫–∞–∂–µ–º –µ—ë
                alert("‚ùå –°–ë–û–ô sendData: " + e);
                document.getElementById('log').innerText = e;
            }
        }
    </script>
</body>
</html>
